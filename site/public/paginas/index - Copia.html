<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vitrine Fashion | Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../index.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://kit.fontawesome.com/3f0399636b.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script>
    <script src="http://www.chartjs.org/samples/latest/utils.js"></script>

</head>
<body>
    <div class="header">
        <div class="container">
       <a href="../paginas/index - Copia.html"><h1 class="titulo">Vitrine Fashion</h1></a> 
        <ul class="navbar">
            <li> <a href="../paginas/index - Copia.html">Home</a></li>
            <li><a href="">Estilos</a>
            <ul class="dropdown">
                <li><a href="../paginas/estiloromantico.htm">Rômantico</a></li>
                <li><a href="../paginas/estiloclassico.htm">Clássico</a></li>
                <li><a href="../paginas/estilocasual.htm">Casual</a></li>
                <li><a href="../paginas/estilocriativo.htm">Criativo</a></li>
                <li><a href="../paginas/estilodramaticourbano.htm">Dramático Urbano</a></li>
                <li><a href="../paginas/estiloelegante.htm">Elegante</a></li>
                <li><a href="../paginas/estilosexy.htm">Sexy</a></li>
            </ul></li>
            <li><a href="../paginas/noticias.htm">Notícias</a></li>
            <button onclick="limparSessao()">Sair</button>
        </ul>
        </div>
    </div>
   <div class="banner">
        <div class="container">
            <p> Não há necessidade de se vestir como todo mundo. É muito mais divertido criar seu próprio visual.</p>
        </div>
    </div>
        <div class="container">
            <div class="boxes">
                <div class="box">
                    <img src="../imgs/home/gostar.png" alt="icone de coração">
                    <br>
                    <h4>Imaginação e Criação</h4>
                    <p>A imaginação permite que as pessoas criem ideias e visões únicas em suas mentes, enquanto a criação de estilo permite que elas transformem essas ideias em realidade através de roupas, acessórios e outros elementos visuais.</p>
                </div>
                <div class="box">
                    <img src="../imgs/home/moda.png" alt="icone de um vestido">
                    <br>
                    <h4>Estilo x Moda</h4>
                    <p>O estilo é a maneira pela qual uma pessoa escolhe se vestir para expressar sua personalidade, enquanto a moda é uma forma de se inspirar nas tendências atuais para criar looks interessantes e atualizados.</p>
                </div>
                <div class="box">
                    <img src="../imgs/home/sacola.png" alt="icone de sacola">
                    <br>
                    <h4>Compra Consciente</h4>
                    <p>Ao adotar a compra consciente, as pessoas podem fazer escolhas mais responsáveis em relação ao consumo, contribuindo para a preservação do meio ambiente, a valorização dos direitos trabalhistas e a promoção de uma economia mais justa e sustentável.</p>
                </div>
            </div>
        </div>
    </div>


    <div class="social2">
        <h1>Combinações</h1>
        <div class="boxes-gif"> 
            <div class="box-gif">
                <img src="../imgs/home/cores.gif" alt="">  
                <p>Cores</p>
            </div>
            <div class="espaco" style="color: white;">.</div>
            <div class="box-gif">
                <img src="../imgs/home/acessorios.gif" alt="">  
                <p>Acessórios</p>
            </div>
            <div class="espaco" style="color: white;">.</div>
            <div class="box-gif">
                <img src="../imgs/home/estampas.gif" alt="">  
                <p>Estampas</p>
            </div>
         </div>

         <div class="out">
            <h1>Em alta na Estação</h1>
            <div class="banner2">
                  <img src="../imgs/home/outono.png" alt="" >
            </div>
         </div>
        
            <h1>Conheça algumas Criadoras de Conteúdo Fashion</h1>
            <div class="carroselContainer">
        <div class="homeCarrossel">
            <div class="imgEsgrima" id="img">
                <img src="../imgs/home/insta3.png" class="imgSlide">
                <img src="../imgs/home/insta4.png" class="imgSlide">
                <img src="../imgs/home/insta3.png" class="imgSlide">
                <img src="../imgs/home/insta4.png" class="imgSlide">
                <img src="../imgs/home/insta4.png" class="imgSlide">
                <img src="../imgs/home/insta4.png" class="imgSlide">
                <img src="../imgs/home/insta4.png" class="imgSlide">
            </div>
        </div>
    </div> 
         
          

            <div class="espaco" style="color: white;">.</div>
            <div class="espaco" style="color: white;">.</div> 

            <div class="card-grafico">
                <h2>A importância das temperaturas regionais no look</h2>
                <p>
                    Cada região possui variações de temperatura que podem afetar diretamente o nosso conforto e bem-estar. Ao montar um look, é fundamental considerar essas diferenças e adaptar-se ao clima local.
                </p>
                <div id="metricaRegiao">
                    <div class="grafico">
                
                        <canvas id="regiaoBarra"> </canvas>
            
                    </div>
                
                </div>
                <p>
                    Ao analisar o gráfico, é possível perceber a variação de usuários em diferentes regiões. Essa informação é essencial para planejar o conteúdo adequado e estar preparada para que nossas dicas ajudem mulheres de todas as regiões.
                </p>
            </div>
        

          <div class="workshop"><h1>Workshops</h1></div>
         <div class="boxes"> 
            <div class="box">
                <img src="../imgs/home/workshop1.png" alt="" >  
            </div>
            <div class="box" id="img">
                 <img src="../imgs/home/workshop2.png" alt="" >   
                 
            </div>
            <div class="box">
                <img src="../imgs/home/workshop3.png" alt="" >  
                
            </div>
            <div class="box">
                <img src="../imgs/home/workshop4.png" alt="" >  
            </div>
         </div>
        </div>
    </div> 
</div> 
  

<div class="footer" style="color: white;">
   
        <a href="https://www.instagram.com/raquelmiy/"><img src="../imgs/home/instagram.png" alt=""></a>
        <a href="https://www.linkedin.com/in/raquel-vitoria-sousa-guimar%C3%A3es-55470917b/"><img src="../imgs/home/linkedin.png" alt=""></a>
        
    <p>Created by Raquel</p>
</div>

</body>
</html>
<script>
function limparSessao() {
    // aguardar();
    sessionStorage.clear();
    // finalizarAguardar();
    window.location = "login.html";
}
</script>
<script>
    let proximaAtualizacao;

    window.onload = obterDadosGrafico(1);


    function obterDadosGrafico(idAquario) {

        if (proximaAtualizacao != undefined) {
            clearTimeout(proximaAtualizacao);
        }


        fetch(`/medidas/ultimas/${idAquario}`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    plotarGrafico(resposta, idAquario);

                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
    // Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
    // A função *plotarGrafico* também invoca a função *atualizarGrafico*
    function plotarGrafico(resposta, idAquario) {
        console.log('iniciando plotagem do gráfico...');

        var dados = {
            labels: [],
            datasets: [
                {
                    label: '',
                    data: []
                },
                {
                    yAxisID: 'y-regiao',
                    label: 'Região',
                    backgroundColor: ['#DC143C', '#DC143C', '#DC143C', '#DC143C', '#DC143C', '#DC143C'],
                    fill: true,
                    data: []
                }
            ]
        };


        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            dados.labels.push(registro.Regiao);
            dados.datasets[0].data.push(registro.Regiao);
            dados.datasets[1].data.push(registro.Voto);
            console.log(registro.Voto)


        }

        console.log(JSON.stringify(dados));

        var ctx = regiaoBarra.getContext('2d');
        window.regiaoBarra = Chart.Bar(ctx, {
            data: dados,
            options: {
                responsive: true,
                animation: { duration: 900 },
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: true,
                    text: 'Regiões Usuários'
                },

                scales: {
                    yAxes: [{
                        type: 'linear',
                        display: true,
                        position: 'left',
                        id: 'y-regiao',
                        ticks: {
                            beginAtZero: true,
                            max: 30,
                            min: 0
                        }
                    }, {
                        display: false,
                    }],
                }
            }
        });


        // Esta função *atualizarGrafico* atualiza o gráfico que foi renderizado na página,
        // buscando a última medida inserida em tabela contendo as capturas, 

        //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
        //     Para ajustar o "select", ajuste o comando sql em src/models
        function atualizarGrafico(idAquario, dados) {

            fetch(`/medidas/tempo-real/${idAquario}`, { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (novoRegistro) {

                        console.log(`Dados recebidos Atualizar  Graficos: ${JSON.stringify(novoRegistro)}`);
                        console.log(dados);

                        for (i = 0; i < novoRegistro.length; i++) {
                            var registro = novoRegistro[i];
                            // tirando e colocando valores no gráfico
                            dados.labels.shift(); // apagar o primeiro
                            dados.labels.push(registro.Regiao);// incluir um novo momento

                            dados.datasets[0].data.shift();  // apagar o primeiro de umidade
                            dados.datasets[0].data.push(registro.Regiao); // incluir uma nova medida de umidade

                            dados.datasets[1].data.shift();
                            dados.datasets[1].data.push(registro.Voto);
                        }

                        window.myChart.update();

                        // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                        proximaAtualizacao = setTimeout(() => atualizarGrafico(idAquario, dados), 2000);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                    // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                    proximaAtualizacao = setTimeout(() => atualizarGrafico(idAquario, dados), 200000);
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

    }
</script>
<script>
    var imgs = document.getElementById('img');
    var img = document.querySelectorAll("#img img")
    
    var slideContador = 0;
    
    function slide() {
    slideContador++;
    if (slideContador > img.length - 1) {
    slideContador = 0
    }
    
    imgs.style.transform = `translateX(${-slideContador * 400}px)`;
    }
    
    setInterval(slide, 3000);
    
</script>